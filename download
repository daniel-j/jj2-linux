#!/bin/bash

. ./env

ahkurl="https://autohotkey.com/download/ahk-u32.zip"
jj2url="$1"

mkdir -p dl

if [ "$jj2url" != "" ]; then
	echo "Downloading JJ2 installer..."
	curl -C - -o "dl/installer.exe" -z "dl/installer.exe" "$jj2url" --connect-timeout 30
fi

if [ ! -f "ahk/AutoHotkey.exe" ]; then
	echo "Downloading AutoHotkey..."
	curl -o "dl/ahk.zip" -z "dl/ahk.zip" -L "$ahkurl" --connect-timeout 30

	unzip -o "dl/ahk.zip" "AutoHotkey.exe" -d ahk
	# no need to keep this around
	rm "dl/ahk.zip"
fi